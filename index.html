<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/>
<title>Mon Pizzagramme ‚Äî Calculateur de p√¢te √† pizza</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0f5f6a">
<link rel="icon" href="favicon.ico">
<style>
:root{
  --accent-dark:#0f5f6a;
  --accent:#018b90;
  --accent-light:#01c9d9;
  --bg-top:#dff8ff;
  --bg-bottom:#0f5f6a;
  --surface:#f4f4f4;
  --muted:#6b7280;
  --card:#ffffff;
  --radius:12px;
}
*{box-sizing:border-box}html,body{height:100%}body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,var(--bg-top),var(--bg-bottom));color:#111;-webkit-font-smoothing:antialiased}
.app-wrap{background:var(--surface);min-height:100vh;padding:20px}
.app{max-width:1100px;margin:20px auto;background:var(--card);border-radius:12px;overflow:hidden;box-shadow:0 12px 40px rgba(11,22,28,0.06);border:1px solid rgba(0,0,0,0.04)}
header{background:var(--accent-dark);color:#fff;padding:12px 18px;display:flex;align-items:center;gap:12px;position:sticky;top:0}
.logo-badge{width:44px;height:44px;border-radius:10px;background:linear-gradient(180deg,var(--accent),var(--accent-dark));display:flex;align-items:center;justify-content:center;font-weight:700;color:#fff;font-size:20px;box-shadow:0 6px 18px rgba(1,127,134,0.18)}
h1{margin:0;font-size:1rem}
main{display:flex;flex-wrap:wrap;gap:18px;padding:18px}
.controls{flex:1 1 420px;min-width:260px;padding:8px}
.outputs{flex:1 1 420px;min-width:260px;padding:8px}
label{display:block;color:var(--muted);margin-top:10px;font-weight:600}
input,select,button{width:100%;padding:10px;margin-top:6px;border-radius:8px;border:1px solid #e6eef2;font-size:16px;background:#fff}
.card{background:linear-gradient(180deg,#fbfeff,#f7fbff);padding:12px;border-radius:8px;box-shadow:0 6px 18px rgba(11,22,28,0.04)}
.result{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:10px}
.result div{background:#fff;padding:10px;border-radius:8px;text-align:center;border:1px solid rgba(11,22,28,0.03)}

/* splash */
.splash{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:9999;background:linear-gradient(180deg,var(--bg-top),var(--bg-bottom));color:#fff;flex-direction:column;gap:10px}
.bubble{width:140px;height:140px;border-radius:50%;background:radial-gradient(circle at 30% 30%, rgba(255,255,255,0.12), rgba(255,255,255,0.04));box-shadow:inset 0 8px 20px rgba(0,0,0,0.12);display:flex;align-items:center;justify-content:center;transform:scale(0.7);opacity:0}
.logo-text{font-weight:800;font-size:28px;letter-spacing:0.2px}
.slogan{color:rgba(255,255,255,0.9)}

/* animations */
@keyframes popZoom {0%{transform:scale(0.7) rotateX(0deg);opacity:0}60%{transform:scale(1.08) rotateX(12deg);opacity:1}100%{transform:scale(1) rotateX(0deg);opacity:1}}
.animated{animation:popZoom 1.5s cubic-bezier(.2,.9,.3,1) forwards}

/* toast */
.toast{position:fixed;left:50%;transform:translateX(-50%);bottom:28px;background:var(--accent-light);color:#fff;padding:10px 14px;border-radius:12px;display:none;box-shadow:0 8px 24px rgba(1,201,217,0.18);z-index:10000}

/* button interaction */
button:active{transform:scale(0.98)}
.btn-bounce{transition:transform .16s cubic-bezier(.2,.9,.3,1)}

/* responsive */
@media(max-width:800px){main{padding:14px;flex-direction:column} .bubble{width:100px;height:100px} .logo-text{font-size:20px}}
.footer{padding:12px;text-align:center;color:var(--muted);font-size:0.9rem;border-top:1px solid rgba(11,22,28,0.02)}
.by-steff{position:fixed;right:12px;bottom:8px;font-size:12px;color:rgba(0,0,0,0.45)}
</style>
</head>
<body>
<div class="splash" id="splash" aria-hidden="true">
  <div class="bubble" id="bubble" role="img" aria-label="logo bubble"><div style="font-size:44px">üçï</div></div>
  <div class="logo-text" id="splashTitle">Mon Pizzagramme</div>
  <div class="slogan" id="splashSlogan">Ta p√¢te parfaite en un clic !</div>
  <div style="font-size:13px;opacity:0.85">par Steff</div>
</div>

<div class="app-wrap">
  <div class="app" id="app" style="display:none">
    <header>
      <div style="display:flex;align-items:center;gap:12px">
        <div class="logo-badge" id="headerBadge">üçï</div>
        <div><h1>Mon Pizzagramme</h1><div style="opacity:0.9;font-size:0.9rem">Calculateur de p√¢te √† pizza</div></div>
      </div>
    </header>
    <main>
      <section class="controls">
        <label for="preset">Type de pizza</label>
        <select id="preset"></select>
        <div style="display:flex;gap:10px">
          <div style="flex:1"><label for="numBalls">Nombre de p√¢tons</label><input id="numBalls" type="number" value="4" min="1" inputmode="numeric"></div>
          <div style="flex:1"><label for="weightPerBall">Poids p√¢ton (g)</label><input id="weightPerBall" type="number" value="250" min="50" inputmode="numeric"></div>
        </div>
        <label for="hydration">Hydratation (%) <span id="hydrationVal">60%</span></label>
        <input id="hydration" type="range" min="40" max="90" value="60">
        <div style="display:flex;gap:8px;margin-top:12px">
          <button id="resetBtn" class="btn-bounce" style="background:#fff;color:var(--accent);border:1px solid #e6eef2;padding:10px;border-radius:8px">üîÅ R√©initialiser</button>
          <button id="applyPreset" class="btn-bounce" style="background:var(--accent);color:#fff;border:none;padding:10px;border-radius:8px">Appliquer</button>
        </div>
      </section>
      <section class="outputs">
        <div class="card">
          <h3>Ingr√©dients</h3>
          <div class="result" id="resultGrid">
            <div><small>Farine</small><div id="flour">0 g</div></div>
            <div><small>Eau</small><div id="water">0 g</div></div>
            <div><small>Sel</small><div id="salt">0 g</div></div>
            <div><small>Levure inst.</small><div id="yeast">0 g</div></div>
            <div style="grid-column:1/-1"><small>Levure fra√Æche (approx.)</small><div id="yeastFresh">0 g</div></div>
            <div style="grid-column:1/-1"><small>Total p√¢te</small><div id="totalDesc">0 g</div></div>
          </div>
        </div>
      </section>
    </main>
    <div class="footer">¬© 2025 ‚Äî Mon Pizzagramme üçï ¬∑ par Steff</div>
  </div>
</div>

<div class="toast" id="toast">Bienvenue dans ton Pizzagramme üçï ‚Äî pr√™t √† calculer ta p√¢te parfaite !</div>
<div class="by-steff">by Steff</div>

<audio id="pop" src="pop.mp3" preload="auto"></audio>
<audio id="ding" src="ding.mp3" preload="auto"></audio>

<script>
const PRESETS = {"Napolitaine":{hydration:0.60,saltPct:0.02,yeastPct:0.002},"Romaine":{hydration:0.65,saltPct:0.02,yeastPct:0.002},"New York":{hydration:0.62,saltPct:0.02,yeastPct:0.0015},"Detroit":{hydration:0.70,saltPct:0.02,yeastPct:0.0025},"Biga":{hydration:0.58,saltPct:0.02,yeastPct:0.0015}};

const presetSel = document.getElementById('preset');
Object.keys(PRESETS).forEach(k=>{const o=document.createElement('option');o.value=k;o.textContent=k;presetSel.appendChild(o)});
presetSel.value='Napolitaine';

const numBallsEl = document.getElementById('numBalls');
const weightPerBallEl = document.getElementById('weightPerBall');
const hydrationEl = document.getElementById('hydration');
const hydrationVal = document.getElementById('hydrationVal');
const flourEl = document.getElementById('flour'), waterEl = document.getElementById('water'), saltEl = document.getElementById('salt'), yeastEl = document.getElementById('yeast'), yeastFreshEl = document.getElementById('yeastFresh'), totalDescEl = document.getElementById('totalDesc');

function recalc(){ 
  const numBalls = Number(numBallsEl.value)||1;
  const weightPerBall = Number(weightPerBallEl.value)||250;
  const total = Math.max(1, Math.round(numBalls*weightPerBall));
  const hyd = Number(hydrationEl.value)/100;
  const saltPct = PRESETS[presetSel.value].saltPct || 0.02;
  const yeastPct = PRESETS[presetSel.value].yeastPct || 0.002;
  const combine = 1 + hyd + saltPct + yeastPct;
  const F = total / combine;
  const W = F * hyd;
  const S = F * saltPct;
  const Y = F * yeastPct;
  flourEl.textContent = Math.round(F)+' g';
  waterEl.textContent = Math.round(W)+' g';
  saltEl.textContent = S.toFixed(1)+' g';
  yeastEl.textContent = Y.toFixed(2)+' g';
  yeastFreshEl.textContent = (Y*3).toFixed(2)+' g (approx.)';
  totalDescEl.textContent = total+' g ‚Äî '+numBalls+' p√¢tons √ó '+weightPerBall+' g';
}

[numBallsEl,weightPerBallEl,hydrationEl,presetSel].forEach(el=>el.addEventListener('input',recalc));
document.getElementById('applyPreset').addEventListener('click',()=>{ presetSel.dispatchEvent(new Event('change')); });
document.getElementById('resetBtn').addEventListener('click',()=>{ numBallsEl.value=4; weightPerBallEl.value=250; hydrationEl.value=60; hydrationVal.textContent='60%'; recalc(); });
presetSel.addEventListener('change', ()=>{ const p = PRESETS[presetSel.value]; hydrationEl.value = Math.round(p.hydration*100); hydrationVal.textContent = Math.round(p.hydration*100)+'%'; recalc(); });

// splash sequence and toast
document.addEventListener('DOMContentLoaded', ()=>{
  const splash = document.getElementById('splash');
  const bubble = document.getElementById('bubble');
  const badge = document.getElementById('headerBadge');
  const pop = document.getElementById('pop');
  const ding = document.getElementById('ding');
  const toast = document.getElementById('toast');
  // animate
  bubble.classList.add('animated');
  badge.classList.add('animated');
  setTimeout(()=>{ try{ pop.play().catch(()=>{}); }catch(e){} }, 200);
  setTimeout(()=>{ try{ ding.play().catch(()=>{}); }catch(e){} }, 700);
  setTimeout(()=>{
    splash.style.transition='opacity .5s'; splash.style.opacity=0;
    setTimeout(()=>{ splash.style.display='none'; document.getElementById('app').style.display='block'; recalc();
      toast.style.display='block'; toast.style.opacity=0; setTimeout(()=>toast.style.opacity=1,20); setTimeout(()=>{ toast.style.transition='opacity .6s'; toast.style.opacity=0; setTimeout(()=>toast.style.display='none',600); },3000);
    }, 520);
  }, 1500);
  if('serviceWorker' in navigator){ navigator.serviceWorker.register('service-worker.js').catch(()=>{}); }
});
</script>
</body>
</html>
